from app import app, db, User, Product, Cart

def seed_data():
    with app.app_context():
        # Очистка базы
        db.session.query(User).delete()
        db.session.query(Product).delete()
        db.session.query(Cart).delete()
        db.session.commit()

        # Тестовый пользователь
        user = User(username="testuser", password="testpass")
        db.session.add(user)
        db.session.commit()

        # Корзина для пользователя
        cart = Cart(user_id=user.id)
        db.session.add(cart)
        db.session.commit()

        # Только два указанных товара
        products = [
            Product(
                name="ПедиаШур Малоежка",
                description="ПедиаШур Малоежка — это вкусный полезный напиток, который дополнит несбалансированную еду питательными веществами, чтобы ребёнок получал всё самое необходимое для здорового роста, развития и укрепления иммунитета*. Продукт предназначен для питания детей от 1 года до 10 лет и подходит для ежедневного употребления. ПедиаШур Малоежка отлично дополнит рацион, если ребенок ест мало или отказывается от определенных групп продуктов, а также поддержит ребенка в период повышенных умственных или физических нагрузок.",
                price=189,
                quantity=30,
                category="Детское питание"
            ),
            Product(
                name="Музыкальный мобиль",
                description="Развивающий мобиль в кроватку Мишка - первая игрушка для вашего малыша, которая помогает ему развиваться с пелёнок. Музыкальная карусель в кроватку и подвесные игрушки для ребёнка изготовлены из экологичного пластика, не выделяют вредных веществ, не имеют запаха, не вредят здоровью ваших деток. Карусель для малышей играет колыбельные песни, что помогает успокаивать нервную систему малыша, также присутствуют весёлые песенки для полноценного развития и восприятия мира. Карусель имеет в комплекте яркий интересный проектор, который привлекает внимание вашего ребёнка. Игрушки можно снять и играть с ними отдельно. Товар легко собрать и прикрепить к кровати малыша.",
                price=1750,
                quantity=8,
                category="Игрушки"
            )
        ]

        db.session.add_all(products)
        db.session.commit()
        print("База данных инициализирована с 2 товарами")

if __name__ == '__main__':
    seed_data()